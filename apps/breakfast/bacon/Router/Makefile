COMPONENT=RouterAppC

#router defaults
ENABLE_BACON_SAMPLER?=0
ENABLE_TOAST_SAMPLER?=0
ENABLE_PHOENIX?=0
ENABLE_SETTINGS_LOGGING?=1
ENABLE_SETTINGS_CONFIG?=1
ENABLE_SETTINGS_CONFIG_FULL?=0
ENABLE_AUTOPUSH?=1
ENABLE_CONFIGURABLE_LOG_NOTIFY?=0
ENABLE_PROBE_SCHEDULE_CONFIG?=1
ENABLE_FORWARDER_SELECTION ?= 1
ENABLE_AUTOSENDER?=0
ENABLE_PRINTF ?= 0

RAW_SERIAL_PRINTF = 1

DL_GLOBAL?=DL_DEBUG

DL_LPP?=DL_ERROR
DL_LINK?=DL_ERROR
DL_LINK_TIMING?=DL_ERROR
DL_SCHED?=DL_ERROR
DL_SCHED_RX?=DL_ERROR
DL_ROUTER?=DL_ERROR
DL_ROUTING?=DL_ERROR
DL_AUTOPUSH?=DL_ERROR
DL_STATS?=DL_INFO

include $(TOSROOT)/apps/breakfast/bacon/cxCommon/Makefile


#router-specific config
CFLAGS += -DCX_BASESTATION=0
CFLAGS += -DCX_ROUTER=1

MAX_POWER?= 0xC3
CFLAGS += -DMAX_POWER=$(MAX_POWER)
CFLAGS += -DPATABLE0_SETTING=$(MAX_POWER)

MIN_POWER?= 0x03
CFLAGS += -DMIN_POWER=$(MIN_POWER)

CFLAGS += -I.

#router optimizations
CFLAGS += -I$(TOSDIR)/platforms/bacon/hardware/usci/noShare
CFLAGS += -I$(TOSDIR)/platforms/bacon/hardware/usci/noI2c
CFLAGS += -I$(TOSDIR)/platforms/bacon/chips/stm25p/noI2c

#router serial
CFLAGS += -I$(TOSDIR)/lib/cxl/serial
CFLAGS+=-I$(TOSDIR)/lib/serialprintf

CFLAGS += -DPROBE_LOG_INTERVAL=2
CFLAGS += -DLOG_CTS_TIME=0
CFLAGS += -DLOG_NEIGHBORHOOD=0

#TODO: hook up to sd card log storage impl

CFLAGS+=-DCC430_PIN_DEBUG=1

include $(MAKERULES)

#NOTE: to specify from command line:
# TEST_DESC=\\\"TEST_INFO\\\"
TEST_DESC?=\"NO_INFO\"
CFLAGS+=-DTEST_DESC=$(TEST_DESC)

TEST_SEGMENT?=NS_SUBNETWORK_DEF
CFLAGS += -DTEST_SEGMENT=$(TEST_SEGMENT)

PRINTF_STATS_LOG?=0
CFLAGS += -DPRINTF_STATS_LOG=$(PRINTF_STATS_LOG)

TEST_PAYLOAD_LEN?=64
CFLAGS += -DTEST_PAYLOAD_LEN=$(TEST_PAYLOAD_LEN)
TEST_DESTINATION?=0xFFFF
CFLAGS += -DTEST_DESTINATION=$(TEST_DESTINATION)
TEST_DATA_RATE?=0
CFLAGS += -DTEST_DATA_RATE=$(TEST_DATA_RATE)
PACKETS_PER_DOWNLOAD?=0
CFLAGS += -DPACKETS_PER_DOWNLOAD=$(PACKETS_PER_DOWNLOAD)

GLOBAL_CHANNEL?=0
CFLAGS +=-DGLOBAL_CHANNEL=$(GLOBAL_CHANNEL)

SUBNETWORK_CHANNEL?=32
CFLAGS +=-DSUBNETWORK_CHANNEL=$(SUBNETWORK_CHANNEL)

ROUTER_CHANNEL?=64
CFLAGS +=-DROUTER_CHANNEL=$(ROUTER_CHANNEL)

MAX_TX_LONG?=1
CFLAGS+=-DMAX_TX_LONG=$(MAX_TX_LONG)

MAX_TX_SHORT?=4
CFLAGS+=-DMAX_TX_SHORT=$(MAX_TX_SHORT)

RX_SLACK?=15UL
CFLAGS += -DRX_SLACK=$(RX_SLACK)

TX_SLACK?=44UL
CFLAGS += -DTX_SLACK=$(TX_SLACK)

CFLAGS += -I$(TOSDIR)/lib/cxl/link
CFLAGS += -I$(TOSDIR)/lib/cxl/packet
CFLAGS += -I$(TOSDIR)/lib/cxl/mac
CFLAGS += -I$(TOSDIR)/lib/cxl/am
CFLAGS += -I$(TOSDIR)/lib/cxl/debug
CFLAGS += -I$(TOSDIR)/lib/cxl/scheduler
CFLAGS += -I$(TOSDIR)/lib/cx/routing
CFLAGS += -I$(TOSDIR)/lib/cx/debug
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/timer
CFLAGS += -I$(TOSROOT)/apps/breakfast/util
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/stackGuard
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/globalID
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/i2cDiscover
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/i2cCom
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/i2cTLVStorage
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/i2cADCReader
CFLAGS += -I$(TOSROOT)/apps/breakfast/util/i2cSynch
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/autoPush
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/BaconSampler
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/Metadata
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/Ping
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/rebooter
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/RebootCounter
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/settingsStorage
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/ToastSampler
CFLAGS += -I$(TOSROOT)/apps/breakfast/bacon/cxlTestbed
CFLAGS += -I$(TOSDIR)/chips/msp430/tlvStorage

PFLAGS+=-DMSP430XV2_DCO_CONFIG=MSP430XV2_DCO_32MHz_RSEL6
CFLAGS+=-DXT2_SMCLK

XT2_DC_ENABLED?=1
CFLAGS+=-DXT2_DC_ENABLED=$(XT2_DC_ENABLED)

CFLAGS+= -DRF1A_FEC_ENABLED=1

FRAMELEN_FAST_SHORT?=37050UL
CFLAGS+=-DFRAMELEN_FAST_SHORT=$(FRAMELEN_FAST_SHORT)

FRAMES_PER_SLOT?=50
CFLAGS +=-DFRAMES_PER_SLOT=$(FRAMES_PER_SLOT)

CX_MAX_DEPTH?=8
CFLAGS+=-DCX_MAX_DEPTH=$(CX_MAX_DEPTH)

LPP_DEFAULT_PROBE_INTERVAL?=1024UL
CFLAGS += -DLPP_DEFAULT_PROBE_INTERVAL=$(LPP_DEFAULT_PROBE_INTERVAL)


SELF_SFD_SYNCH?=1
CFLAGS += -DSELF_SFD_SYNCH=$(SELF_SFD_SYNCH)
POWER_ADJUST?=1
CFLAGS += -DPOWER_ADJUST=$(POWER_ADJUST)
MISSED_CTS_THRESH?=4
CFLAGS += -DMISSED_CTS_THRESH=$(MISSED_CTS_THRESH)

STATIC_BW?=2
CFLAGS += -DSTATIC_BW=$(STATIC_BW)

DEFAULT_MAX_DOWNLOAD_ROUNDS?=5
CFLAGS +=-DDEFAULT_MAX_DOWNLOAD_ROUNDS=$(DEFAULT_MAX_DOWNLOAD_ROUNDS)

DEFAULT_MAX_ATTEMPTS?=2
CFLAGS +=-DDEFAULT_MAX_ATTEMPTS=$(DEFAULT_MAX_ATTEMPTS)

LPP_SLEEP_TIMEOUT?=30720UL
CFLAGS+=-DLPP_SLEEP_TIMEOUT=$(LPP_SLEEP_TIMEOUT)

DEFAULT_HIGH_PUSH_THRESHOLD?=1
CFLAGS+=-DDEFAULT_HIGH_PUSH_THRESHOLD=$(DEFAULT_HIGH_PUSH_THRESHOLD)

CFLAGS+=-DSINGLE_RECORD_READ=1

ENABLE_LEDS?=0

CONFIGURABLE_BACON_SAMPLE_INTERVAL?=1
CONFIGURABLE_TOAST_SAMPLE_INTERVAL?=1

#optional features
CFLAGS += -DENABLE_LEDS=$(ENABLE_LEDS)
CFLAGS += -DENABLE_BACON_SAMPLER=$(ENABLE_BACON_SAMPLER)
CFLAGS += -DENABLE_TOAST_SAMPLER=$(ENABLE_TOAST_SAMPLER)
CFLAGS += -DPHOENIX_LOGGING=$(ENABLE_PHOENIX)
CFLAGS += -DENABLE_PHOENIX=$(ENABLE_PHOENIX)
CFLAGS += -DENABLE_SETTINGS_LOGGING=$(ENABLE_SETTINGS_LOGGING)
CFLAGS += -DENABLE_SETTINGS_CONFIG=$(ENABLE_SETTINGS_CONFIG)
CFLAGS += -DENABLE_SETTINGS_CONFIG_FULL=$(ENABLE_SETTINGS_CONFIG_FULL)
CFLAGS += -DENABLE_AUTOPUSH=$(ENABLE_AUTOPUSH)
CFLAGS += -DENABLE_CONFIGURABLE_LOG_NOTIFY=$(ENABLE_CONFIGURABLE_LOG_NOTIFY)
CFLAGS += -DENABLE_PROBE_SCHEDULE_CONFIG=$(ENABLE_PROBE_SCHEDULE_CONFIG)
CFLAGS+=-DENABLE_FORWARDER_SELECTION=$(ENABLE_FORWARDER_SELECTION)
CFLAGS += -DENABLE_PRINTF=$(ENABLE_PRINTF)
CFLAGS += -DENABLE_PRECISION_TIMESTAMP=$(ENABLE_PRECISION_TIMESTAMP)
CFLAGS += -DRAW_SERIAL_PRINTF=$(RAW_SERIAL_PRINTF)
CFLAGS +=-DCONFIGURABLE_BACON_SAMPLE_INTERVAL=$(CONFIGURABLE_BACON_SAMPLE_INTERVAL)
CFLAGS +=-DCONFIGURABLE_TOAST_SAMPLE_INTERVAL=$(CONFIGURABLE_TOAST_SAMPLE_INTERVAL)
CFLAGS +=-DENABLE_AUTOSENDER=$(ENABLE_AUTOSENDER)
ENABLE_TESTBED ?= 0
CFLAGS +=-DENABLE_TESTBED=$(ENABLE_TESTBED)

#debug levels

DL_TESTBED?=DL_INFO
DL_STATS_RADIO?=DL_INFO
DL_AM?=DL_ERROR
DL_PHOENIX?=DL_ERROR

CFLAGS += -DDL_GLOBAL=$(DL_GLOBAL)
CFLAGS += -DDL_AM=$(DL_AM)
CFLAGS += -DDL_LPP=$(DL_LPP)
CFLAGS += -DDL_LINK=$(DL_LINK)
CFLAGS += -DDL_LINK_TIMING=$(DL_LINK_TIMING)
CFLAGS += -DDL_SCHED=$(DL_SCHED)
CFLAGS += -DDL_SCHED_RX=$(DL_SCHED_RX)
CFLAGS += -DDL_ROUTER=$(DL_ROUTER)
CFLAGS += -DDL_ROUTING=$(DL_ROUTING)
CFLAGS += -DDL_AUTOPUSH=$(DL_AUTOPUSH)
CFLAGS += -DDL_TESTBED=$(DL_TESTBED)
CFLAGS += -DDL_STATS=$(DL_STATS)
CFLAGS += -DDL_STATS_RADIO=$(DL_STATS_RADIO)
CFLAGS += -DDL_PHOENIX=$(DL_PHOENIX)

CFLAGS += -DCX_LPP_BASIC=0
CFLAGS += -DAM_ID_FROM_FLASH=1

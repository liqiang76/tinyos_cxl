COMPONENT=TestAppC

TEST_CHANNEL?=64
CFLAGS+=-DTEST_CHANNEL=$(TEST_CHANNEL)
CFLAGS+=-DLOWPOWER_TX

PFLAGS += -I$(TOSDIR)/lib/serialprintf
CFLAGS += -I../../util
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/timer
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/tdma
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/flood
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/packet
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/physical

TDMA_ROOT?=0
CFLAGS+=-DTDMA_ROOT=$(TDMA_ROOT)

#width of "ring"
TDMA_MAX_RETRANSMIT?=2
#determines length of frame (along with ring width)
TDMA_MAX_DEPTH?=4
#determines total number of slots
TDMA_MAX_NODES?=3

CFLAGS+= -DTDMA_MAX_DEPTH=$(TDMA_MAX_DEPTH)
CFLAGS+= -DTDMA_MAX_NODES=$(TDMA_MAX_NODES)
CFLAGS+= -DTDMA_MAX_RETRANSMIT=$(TDMA_MAX_RETRANSMIT)

#CFLAGS += -DDEBUG_CX_TDMA_P_STATE
CFLAGS += -DDEBUG_CX_TDMA_P_STATE_ERROR

CFLAGS+=-DTDMA_PIN_DEBUG_ON

#defining these vars will enable the debug code.
CFLAGS +=-DPORT_GP=P1OUT
CFLAGS +=-DPIN_GP=BIT1

CFLAGS +=-DPORT_FS_CYCLE=P1OUT
CFLAGS +=-DPIN_FS_CYCLE=BIT3

#CFLAGS +=-DPORT_PFS_CYCLE=P1OUT
#CFLAGS +=-DPIN_PFS_CYCLE=BIT1

CFLAGS +=-DPORT_TXCP_TIMING=P1OUT
CFLAGS +=-DPIN_TXCP_TIMING=BIT4

#CFLAGS +=-DPORT_TX_TIMING=P1OUT
#CFLAGS +=-DPIN_TX_TIMING=BIT4

#CFLAGS +=-DPORT_FS_TIMING=P1OUT
#CFLAGS +=-DPIN_FS_TIMING=BIT4

#CFLAGS +=-DPORT_PFS_TIMING=P1OUT
#CFLAGS +=-DPIN_PFS_TIMING=BIT4

#CFLAGS +=-DPORT_SC_TIMING=P1OUT
#CFLAGS +=-DPIN_SC_TIMING=BIT4

#CFLAGS +=-DPORT_FW_TIMING=P1OUT
#CFLAGS +=-DPIN_FW_TIMING=BIT4

#CFLAGS +=-DPORT_SS_TIMING=P1OUT
#CFLAGS +=-DPIN_SS_TIMING=BIT4

DEBUG_SCALE?=1UL
CFLAGS += -DDEBUG_SCALE=$(DEBUG_SCALE)

#16mhz mclk, 32 mhz dco
PFLAGS+=-DMSP430XV2_DCO_CONFIG=MSP430XV2_DCO_32MHz_RSEL6

CFLAGS+=-DXT2_SMCLK

TA_DIV?=1UL
CFLAGS+=-DTA_DIV=$(TA_DIV)

include $(MAKERULES)
